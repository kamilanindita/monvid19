<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Favicons -->
  <link rel="icon" type="image/png" href="/images/icon.png">

  <link rel="stylesheet" href="/css/header.css">
  <link rel="stylesheet" href="/css/footer.css">
  <link rel="stylesheet" href="/css/timeline.css">
  <link rel="stylesheet" href="/css/bootstrap.min.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <title>Monvid-19</title>
  <style>
  .highcharts-figure, .highcharts-data-table table {
    min-width: 270px;
    max-width: 1200px;
    margin: 1em auto;
  }

  .highcharts-data-table table {
  	font-family: Verdana, sans-serif;
  	border-collapse: collapse;
  	border: 1px solid #EBEBEB;
  	margin: 10px auto;
  	text-align: center;
  	width: 100%;
  	max-width: 500px;
  }
  .highcharts-data-table caption {
      padding: 1em 0;
      font-size: 1.2em;
      color: #555;
  }
  .highcharts-data-table th {
  	font-weight: 600;
      padding: 0.5em;
  }
  .highcharts-data-table td, .highcharts-data-table th, .highcharts-data-table caption {
      padding: 0.5em;
  }
  .highcharts-data-table thead tr, .highcharts-data-table tr:nth-child(even) {
      background: #f8f8f8;
  }
  .highcharts-data-table tr:hover {
      background: #f1f7ff;
  }

  </style>
</head>
<body>
<header>
    <img class="mx-auto d-block mt-2" src="/images/logo.png" alt="logo"></a>
    <nav class="navbar fixed-bottom navbar-expand navbar-light bg-white">
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav mx-auto text-center">
          <a class="nav-item nav-link" href="index.html">
            <i class="fa fa-home fa-2x"></i><br>
            <small style="font-size:10px;" class="text-muted">Home</small>
          </a>
          <a class="nav-item nav-link" href="details_global.html">
            <i class="fa fa-globe fa-2x"></i><br>
            <small style="font-size:10px;" class="text-muted">Global</small></a>
          <a class="nav-item nav-link active" href="details_indonesia.html">
            <i class="fa fa-list-alt fa-2x"></i><br>
            <small style="font-size:10px;">Indonesia</small></a>
          <a class="nav-item nav-link" href="about.html">
            <i class="fa fa-info-circle fa-2x"></i><br>
            <small style="font-size:10px;" class="text-muted">About</small></a>
        </div>
      </div>
    </nav>
</header>


<div style="margin-top:10px;" class="container-fluid">
    <div class="row">
      <div class="col-sm-12">
        <div class="card text-white">
          <img class="card-img-top" src="/images/indo.jpg" style="opacity:1;min-height:294px" alt="indonesia">
          <div class="card-img-overlay">
            <h4 class="card-title text-center">Indonesi</h4>
            <br>
            <div id="indonesia" class="card-text">Loading...</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<br>
<div class="container">
  <div class="container-fluid">
    <h3>Highest Cases</h3>
    <div class="row">
      <div class="col-sm-4">
        <div class="card text-white">
          <div class="card-body bg-danger">
            <h4 class="card-title text-center">Confirmed</h4>
            <div id="confirmed" class="card-text">Loading...</div>
          </div>
        </div>
      </div>
      <div class="col-sm-4">
        <div class="card text-white">
          <div class="card-body bg-dark">
            <h4 class="card-title text-center">Deaths</h4>
            <div id="meninggal" class="card-text">Loading...</div>
          </div>
        </div>
      </div>
      <div class="col-sm-4">
          <div class="card text-white">
            <div class="card-body bg-success">
              <h4 class="card-title text-center">Recovered</h4>
              <div id="sembuh" class="card-text">Loading...</div>
            </div>
          </div>
      </div>
    </div>
  </div>
</div>
<br>
<div class="container">
  <div class="container-fluid">
    <figure class="highcharts-figure">
        <div id="container"></div>
    </figure>
  </div>
</div>

<div class="container">
  <div class="container-fluid">
  <br>
    <h3 class="card-title text-center">Timeline</h3>
    <br>
    <div class="row">
        <div class="col-md-12">
            <div class="main-timeline4">
                <div id="timeline"></div>
            </div>
        </div>
    </div>
  </div>
</div>


<!-- Footer -->
<footer class="footer">
  <div class="container">
    <div class="copyright">
          &copy; Copyright 2020 <strong>Kamil Anindita</strong>.
        </div>
        <div class="credits">
          Designed with <strong><i class="fa fa-heart" style="color:red"></i></strong></a>
        </div>
  </div>
</footer>
<br>
<br>
<br>
<br>

<script src="/js/jquery-3.4.1.js"></script>
<script src="/js/popper.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/series-label.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>

<script>
$(document).ready(function(){
  //get data indonesia (timeline dan paling tinggi)
  var positif=[]
  $.get("https://api.covid19api.com/total/dayone/country/indonesia", function(data){
    //paling Tertinggi
    var meninggal=[]
    var sembuh=[]
    var a=0
    var b=0
    var c=0
    var hari=[]
    $.each(data, function(key, items){
      positif.push(items.Confirmed-a)
      a=items.Confirmed
      meninggal.push(items.Deaths-b)
      b=items.Deaths
      sembuh.push(items.Recovered-c)
      c=items.Recovered
      hari.push(items.Date)
    })

    var positifMax=Math.max(...positif)
    var indexPos = positif.indexOf(positifMax);

    var meninggalMax=Math.max(...meninggal)
    var indexMen = meninggal.indexOf(meninggalMax);

    var sembuhMax=Math.max(...sembuh)
    var indexSem = sembuh.indexOf(sembuhMax);

    var postPositif ="<div class='text-center'>"
                    +"<p><strong>"
                    + hari[indexPos] +"<br>"
                    + "<h2>"+ positifMax +"</h2> "
                    + "</strong></p>"
                    "</div>";

    var postMeninggal ="<div class='text-center'>"
                    +"<p><strong>"
                    + hari[indexMen] +"<br>"
                    + "<h2>"+ meninggalMax +"</h2> "
                    + "</strong></p>"
                    "</div>";

    var postSembuh ="<div class='text-center'>"
                    +"<p><strong>"
                    + hari[indexSem] +"<br>"
                    + "<h2>"+ sembuhMax +"</h2> "
                    + "</strong></p>"
                    "</div>";

    $('#confirmed').html(postPositif)
    $('#meninggal').html(postMeninggal)
    $('#sembuh').html(postSembuh)


    Highcharts.chart('container', {

      title: {
          text: 'Statistics of Coronavirus Cases'
      },

      subtitle: {
          text: 'Source: covid19api.com'
      },
      xAxis: {
          categories: hari
      },
      legend: {
          layout: 'vertical',
          align: 'right',
          verticalAlign: 'middle'
      },
      credits: {
          enabled: false
      },
      series: [{
          name: 'Confirmed',
          data: positif,
      },{
          name: 'Deaths',
          data: meninggal,
      },{
          name: 'Recovered',
          data: sembuh,
      }
    ],

      responsive: {
          rules: [{
              condition: {
                  maxWidth: 500
              },
              chartOptions: {
                  legend: {
                      layout: 'horizontal',
                      align: 'center',
                      verticalAlign: 'bottom'
                  }
              }
          }]
      }

    });

  })
})
</script>


</body>
</html>
